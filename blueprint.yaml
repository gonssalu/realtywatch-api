models:
  AdministrativeDivision:
    id: id
    name: string
    level: smallInteger
    parent_id: bigInteger unsigned nullable foreign:administrative_divisions.id
    indexes:
      - index: name
  PropertyAddress:
    id: false
    property_id: bigIncrements foreign:properties.id
    postal_code: string nullable
    adm1_id: bigInteger unsigned nullable foreign:administrative_divisions.id
    adm2_id: bigInteger unsigned nullable foreign:administrative_divisions.id
    adm3_id: bigInteger unsigned nullable foreign:administrative_divisions.id
    full_address: text nullable
    coordinates: point nullable
    indexes:
      - index: country
      - index: full_address
      - index: coordinates
  PropertyOfferPriceHistory:
    id: false
    offer_id: bigIncrements foreign:property_offers.id
    datetime: dateTime primary
    price: decimal nullable
    online: boolean
    latest: boolean
  User:
    id: id
    name: string
    email: string
    password: string
    blocked: boolean
    photo_url: text nullable
  ListProperty:
    id: false
    list_id: bigIncrements foreign:lists.id
    property_id: bigIncrements foreign:properties.id
  Agency:
    id: id
    name: string
    logo_url: text
    user_id: bigInteger unsigned foreign:users.id
  PropertyMedia:
    id: id
    property_id: bigInteger unsigned foreign:properties.id
    type: enum
    url: text
    indexes:
      - index: property_id, type
  Tag:
    id: id
    user_id: bigInteger unsigned foreign:users.id
    name: string
    indexes:
      - unique: user_id, name
  PropertyOffer:
    id: id
    property_id: bigInteger unsigned foreign:properties.id
    url: text
    description: string nullable
    agency_id: bigInteger nullable foreign:agency.id
    listing_type: enum
    indexes:
      - index: property_id, listing_type
  Characteristic:
    id: id
    user_id: bigInteger unsigned foreign:users.id
    name: string
    type: enum
    indexes:
      - unique: user_id, name, type
      - index: user_id, name
  List:
    id: id
    user_id: bigInteger unsigned foreign:users.id
    name: string
    indexes:
      - unique: user_id, name
  Property:
    id: id
    user_id: bigInteger unsigned foreign:users.id
    quantity: smallInteger nullable
    listing_type: enum
    title: string
    description: text nullable
    cover_url: text nullable
    gross_area: decimal nullable
    useful_area: decimal nullable
    type: enum nullable
    typology: string nullable
    rating: tinyInteger nullable
    current_price_sale: decimal nullable
    status: enum
    wc: tinyInteger nullable
    indexes:
      - index: title
      - index: description
      - index: status
      - index: listing_type
  ListTag:
    id: false
    list_id: bigIncrements foreign:lists.id
    tag_id: bigIncrements foreign:tags.id
  PropertyTag:
    id: false
    property_id: bigIncrements foreign:properties.id
    tag_id: bigIncrements foreign:tags.id
  PropertyCharacteristic:
    id: id
    property_id: bigInteger unsigned foreign:properties.id
    characteristic_id: bigInteger unsigned foreign:characteristics.id
    value: string
